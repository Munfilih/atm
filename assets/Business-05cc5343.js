import{u as g,j as e,e as p,f as j}from"./index-464d0aff.js";import{r as i}from"./vendor-26985c70.js";import{L as c,B as v,e as N}from"./ui-2e713e73.js";import"./router-3413067a.js";import"./supabase-101da91f.js";const C=()=>{const{user:n}=g(),[l,o]=i.useState({name:"",address:"",phone:"",email:"",userid:""}),[m,b]=i.useState(!0),[d,u]=i.useState(!1);i.useEffect(()=>{(async()=>{if(n)try{const a=await p(n.id);o(a?{...a,userid:n.id}:r=>({...r,userid:n.id}))}catch(a){console.error("Error fetching business:",a)}finally{b(!1)}})()},[n]);const x=async()=>{if(n){u(!0);try{const{name:s,address:a,phone:r,email:h,userid:f}=l;await j({name:s,address:a,phone:r,email:h,userid:f}),alert("Business information saved successfully!")}catch(s){console.error("Error saving business:",s),alert("Failed to save business information: "+((s==null?void 0:s.message)||"Unknown error"))}finally{u(!1)}}},t=(s,a)=>{o(r=>({...r,[s]:a}))};return m?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(c,{className:"w-6 h-6 animate-spin text-blue-500"})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(v,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"My Business"}),e.jsx("p",{className:"text-slate-500",children:"Manage your business information"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Business Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>t("name",s.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter your business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Address"}),e.jsx("textarea",{value:l.address,onChange:s=>t("address",s.target.value),rows:3,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none",placeholder:"Enter your business address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.phone,onChange:s=>t("phone",s.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:s=>t("email",s.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter email address"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:x,disabled:d||!l.name.trim(),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d?e.jsx(c,{className:"w-4 h-4 animate-spin"}):e.jsx(N,{className:"w-4 h-4"}),d?"Saving...":"Save Business Info"]})})]})})]})};export{C as Business};
