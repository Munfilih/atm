const m=t=>Math.round((t+Number.EPSILON)*100)/100,l=(...t)=>{const a=t.reduce((s,n)=>s+n,0);return m(a)},d=(t,a)=>m(t-a),c=t=>{if(t==null||t==="")return 0;const a=Number(t);return isNaN(a)?0:a},i=new Map,x=()=>{i.clear()},g=t=>{const a=l(c(t.mada),c(t.visa),c(t.mastercard),c(t.gcc)),s=t.extrafields?Object.values(t.extrafields).reduce((n,e)=>l(n,c((e==null?void 0:e.slip)||0)),0):0;return l(a,s)},T=t=>{const a=l(c(t.bankmada),c(t.bankvisa),c(t.bankmastercard),c(t.bankgcc)),s=t.extrafields?Object.values(t.extrafields).reduce((n,e)=>l(n,c((e==null?void 0:e.statement)||0)),0):0;return l(a,s)},p=t=>d(T(t),g(t)),b=(t,a,s)=>{const n=s.filter(o=>o.machineid===t&&o.date<a).sort((o,r)=>o.date.localeCompare(r.date));if(n.length===0)return 0;let e=0;for(const o of n){const r=p(o);e=l(e,r)}return e},h=(t,a,s)=>{const n=`${t}-${a}`;if(i.has(n))return i.get(n);const e=s.find(u=>u.machineid===t&&u.date===a);if(!e){const u=b(t,a,s);return i.set(n,u),u}const o=b(t,a,s),r=p(e),f=l(o,r);return i.set(n,f),f};export{h as a,x as b,b as c,p as d,g as e,T as f,d as g,c as p,l as s};
